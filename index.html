<!DOCTYPE html>
<html>
    <!--
        The El Dorado Fire Fatality Learning Product is built with AFrame
        and THREE.js.
    -->
    <head>
        <script src="/scripts/aframe-v1.6.0.min.js"></script>
        <script src="/scripts/simple-navmesh-constraint.js"></script>
        <script src="/scripts/vidloadcontrol.js"></script>
        <script src="/scripts/standdisplay.js"></script>
        <script src="/scripts/add-quote.js"></script>
        <script src="/scripts/aframe-particle-system-component.js"></script>
    </head>
    <body>
        <assets>
            <!-- Images -->
            <img id="eldreport" src="/images/frontpage.png">
            <img id="polles" src="/images/PollesLLCReport.jpg">
            <img id="augustcx" src="/images/AugustCxLLCReport.jpg">

            <!-- Models -->
            <a-asset-item id="floor1" src="/models/2_4Entrance.glb"></a-asset-item>
            <a-asset-item id="floor2" src="/models/2_6MainHall.glb"></a-asset-item>
            <a-asset-item id="floor3" src="/models/2_4IntroHall.glb"></a-asset-item>
            <a-asset-item id="floor4" src="/models/2_6SBNFRoom.glb"></a-asset-item>
            <a-asset-item id="floor5" src="/models/2_6SBNFDeck.glb"></a-asset-item>
            <a-asset-item id="floor6" src="/models/2_4CrewRoom.glb"></a-asset-item>
            <a-asset-item id="floor7" src="/models/2_4Atrium.glb"></a-asset-item>
            <a-asset-item id="floor8" src="/models/2_4ElDRoom.glb"></a-asset-item>
            <a-asset-item id="floor9" src="/models/2_4DozerLine.glb"></a-asset-item>
            <a-asset-item id="floor10" src="/models/2_4LearningRoom.glb"></a-asset-item>
            <a-asset-item id="floor11" src="/models/2_4VisCenter.glb"></a-asset-item>
            <a-asset-item id="navmesh" src="/models/Collision.glb"></a-asset-item>
            <a-asset-item id="glbtrees" src="/models/2_6Trees.glb"></a-asset-item>
            <a-asset-item id="progmap" src="/models/Progression4Anim.glb"></a-asset-item>
            <a-asset-item id="fbmodel" src="/models/FBv2_7_noanim.glb"></a-asset-item>
        </assets>
        <a-scene stats light="defaultLightsEnabled: false">
            <!-- **Camera - note the navmesh component doesn't use a cameraRig here, may need to figure out later. -->
            <!-- **May want screen overlay to show wasd/mouselook controls? -->
            <!-- **Set acceleration for development here.  Probably should be around 30ish in production? -->
            <a-camera position="10.8 0.55 19.7" wasd-controls="acceleration: 150" simple-navmesh-constraint="navmesh: .navmesh; fall: 0.5; height: 1.65" look-controls>
                <a-entity cursor="rayOrigin: mouse" raycaster="objects: .button"></a-entity>
            </a-camera>

            <!-- Skybox-->
            <a-sky color="#2c2c23"></a-sky>

            <!-- Lights -->
            <a-entity id="lights">
                <a-entity light="type: point; intensity: 10.0; distance: 40; color: #d98b3e" position="-17.6 -10.4 -127"></a-entity>
                <a-entity light="type: point; intensity: 10.0; distance: 40; color: #d98b3e" position="-73 1 -100"></a-entity>
                <a-entity light="type: point; intensity: 10.0; distance: 100; color: #da8b3d" position="-97.5 33.5 -185"></a-entity>
                <a-entity light="type: point; intensity: 10.0; distance: 100; color: #da8b3d" position="-196.5 54 -55"></a-entity>
                <a-entity light="type: point; intensity: 10.0; distance: 40; color: #d98b3e" position="12 -3 -190"></a-entity>
                <a-entity light="type: point; intensity: 10.0; distance: 80; color: #c9ba4e" position="36.5 22.3 -258"></a-entity>
            </a-entity>

            <!-- Particle Systems -->
            <a-entity id="particles">
                <a-entity position="-73 1 -100" particle-system="
                    type: 1 (box);
                    maxAge: 10;
                    accelerationValue: -1 1 -1;
                    accelerationSpread: 5 3 2;
                    velocityValue: 2 2 3;
                    particleCount: 1000;
                    texture: ./images/smokeparticle.png;
                    positionSpread: 20 2 -20;
                    color: #cacf05, #e64326, #211601;
                    size: 0.1, 0.8, 4;
                    sizeSpread: 0.3, 0.6, 3"></a-entity>
            </a-entity>

            <!-- Navigation Mesh -->
            <a-entity id="navmodel" class="navmesh" gltf-model="#navmesh" position="0 0 0" visible="false"></a-entity>

            <!-- Building -->
            <!-- Roof goes here -->
            <a-entity id="entrance" gltf-model="#floor1" position="0 0 0"></a-entity>
            <a-entity id="mainhall" gltf-model="#floor2" position="0 0 0"></a-entity>
            <a-entity id="introhall" gltf-model="#floor3" position="0 0 0"></a-entity>
            <a-entity id="sbnfroom" gltf-model="#floor4" position="0 0 0"></a-entity>
            <a-entity id="sbnfdeck" gltf-model="#floor5" position="0 0 0"></a-entity>
            <a-entity id="crewroom" gltf-model="#floor6" position="0 0 0"></a-entity>
            <a-entity id="atrium" gltf-model="#floor7" position="0 0 0"></a-entity>
            <a-entity id="eldroom" gltf-model="#floor8" position="0 0 0"></a-entity>
            <a-entity id="dozerline" gltf-model="#floor9" position="0 0 0"></a-entity>
            <a-entity id="learningroom" gltf-model="#floor10" position="0 0 0"></a-entity>
            <a-entity id="viscenter" gltf-model="#floor11" position="0 0 0"></a-entity>
            <a-entity id="trees" gltf-model="#glbtrees" material="depthTest: true; side: front; transparent: true" position="0 0 0"></a-entity>
            <!-- ITEMS BY ROOM -->
            <!-- Main Hall -->
            <a-entity id="mainhallassets">
                <a-ring id="yah1" color="red" radius-inner="0.02" radius-outer="0.04" position="5.347 1.512 4.929" rotation="0 -90 0" material="emissive: red"></a-ring>
                <a-entity id="stand1" position="0 0 -20" stand-display="billboardtext: AUDIO \n 1; platetext: Introduction: 0:44; audiosrc: /audio/Stand1.mp3"></a-entity>
                <a-entity id="quote1" position="12.3 3 -13.9" rotation="0 -90 0" add-quote="quotetext: 'That was Charlie.  He was an OG.  Always a hardline firefighter.  Goin' hard and doin' it right.'\n-Big Bear IHC Crewmember"></a-entity>
            </a-entity>
            <!-- Introduction Hall -->
             <!-- Need the report link image for stand 2 -->
            <a-entity id="introductionhallassets">
                <a-entity id="vbearpeak" vidloadcontrol="vidid: vidbearpeak; vidsrc: /videos/V1BearPeakSouth1400-2000.mp4; vwidth: 0.854; vheight: 0.48; vscale: 10" position="19 3 -13.2"></a-entity>
                <a-entity id="stand2" position="17 0 -1.5" rotation="0 180 0" stand-display="billboardtext: AUDIO \n 2; platetext: El Dorado Fire: 0:38; audiosrc: /audio/Stand2.mp3"></a-entity>
                <a-image class="button" src="#eldreport" position="19 3 -0.65" rotation="0 180 0" height="1.056" width="0.816" scale="4 4 1" link="href: https://lessons.fs2c.usda.gov/incident/el-dorado-fire-fatality-2020"></a-image>
                <a-entity id="stand3" position="39 0 -12.75" rotation="0 0 0" stand-display="billboardtext: AUDIO \n 3; platetext: Overview: 5:39; audiosrc: /audio/Stand3.mp3"></a-entity>
            </a-entity>
            <!-- San Bernadino NF -->
            <a-entity id="sbnfroomassets">
                <a-entity id="stand4" position="62 0 3" rotation="0 180 0" stand-display="billboardtext: AUDIO \n 4; platetext: SBNF: 1:19; audiosrc: /audio/Stand4.mp3"></a-entity>
                <a-entity id="stand5" position="82 0 -29.4" rotation="0 270 0" stand-display="billboardtext: AUDIO \n 5; platetext: Resource Shortages 1: 1:36; audiosrc: /audio/Stand5.mp3"></a-entity>
                <!-- <a-entity vidloadcontrol="id: 'finneyvid'; vidid: #bearpeak; width: 0.854; height: 0.48" position="82.5 2.6 0.4" rotation="0 270 0" scale="5 5 1"></a-entity> -->
                <a-entity id="stand6" position="62.5 0 -29.4" rotation="0 90 0" stand-display="billboardtext: AUDIO \n 6; platetext: Resource Shortages 2: 3:58; audiosrc: /audio/Stand6.mp3"></a-entity>
                <a-entity id="quote2" position="82.4 8.6 -13.7" rotation="0 -90 0" add-quote="quotetext: 'We know how to suppress fires, but we donâ€™t know how to use fire in the off seasons to manage our fuels to make it safer for firefighters in the summer. We are much more comfortable spending money on suppression than on up front fuels management.'\n-Local Fire Leader"></a-entity>
            </a-entity>
            <!-- Crew Room -->
            <a-entity id="crewroomassets">
                <a-entity id="quote3" position="72.45 2.3 -46.5" rotation="0 -90 0" add-quote="quotetext: 'Death has been circling us all year.'\n-Big Bear IHC Crewmember"></a-entity>
                <a-entity id="stand7" position="65 0 -80.5" rotation="0 0 0" stand-display="billboardtext: AUDIO \n 7; platetext: Big Bear IHC: 2:21; audiosrc: /audio/Stand7.mp3"></a-entity>
                <a-image class="button" id="polleslink" src="#polles" position="61.8 3 -81.4" rotation="0 0 0" height="1.056" width="0.816" scale="4 4 1" link="href: https://lessons.fs2c.usda.gov/incident/polles-fire-helicopter-accident-and-fatality-2020"></a-image>
                <a-image class="button" id="augustcxlink" src="#augustcx" position="67.7 3 -81.4" rotation="0 0 0" height="1.056" width="0.816" scale="4 4 1" link="href: https://lessons.fs2c.usda.gov/incident/august-complex-tatham-fire-fatality-2020"></a-image>
            </a-entity>
            <!-- Stairs -->
            <a-entity id="atriumassets">    
                <a-ring id="yah2" color="red" radius-inner="0.02" radius-outer="0.04" position="72.445 -5.682 -83.45" rotation="0 -90 0" material="emissive: red"></a-ring>
            </a-entity>
            <!-- El Dorado Fire Room -->
            <a-entity id="eldfireroomassets">
                <a-entity id="stand8" position="71.3 -18.6 -114" rotation="0 0 0" stand-display="billboardtext: AUDIO \n 8; platetext: El Dorado Fire: 2:17; audiosrc: /audio/Stand8.mp3"></a-entity>
                <a-entity id="stand9" position="52 -18.6 -107" rotation="0 180 0" stand-display="billboardtext: AUDIO \n 9; platetext: Initial Management: 3:34; audiosrc: /audio/Stand9.mp3"></a-entity>
                <a-entity id="stand10" position="64 -18.6 -117.75" rotation="0 270 0" stand-display="billboardtext: AUDIO \n 10; platetext: Mill Creek: 3:34; audiosrc: /audio/Stand10.mp3"></a-entity>
                <a-entity id="quote4" position="58.48 -16.15 -105.9" rotation="0 180 0" add-quote="quotetext: 'It felt like every day was initial attack.'\n-CAL FIRE Crew Captain"></a-entity>
                <a-entity id="quote5" position="59.5 -16 -142.8" add-quote="quotetext: 'When an individual feels an assignment is unsafe, they also have the obligation to identify, to the degree possible, safe alternatives for completing that assignment.  Turning down an assignment is one possible outcome of managing risk.'\n-IRPG"></a-entity>
                <a-entity id="stand11" position="64 -18.6 -130.6" rotation="0 270 0" stand-display="billboardtext: AUDIO \n 11; platetext: DIV O & L: 1:10; audiosrc: /audio/Stand11.mp3"></a-entity>
                <a-entity id="stand12" position="51.8 -18.6 -145" rotation="0 0 0" stand-display="billboardtext: AUDIO \n 12; platetext: DIV O & IMT: 7:00; audiosrc: /audio/Stand12.mp3"></a-entity>
                <a-entity id="stand13" position="39.5 -18.6 -130.6" rotation="0 90 0" stand-display="billboardtext: AUDIO \n 13; platetext: September 17th: 7:30; audiosrc: /audio/Stand13.mp3"></a-entity>
                <a-entity id="vforesee" vidloadcontrol="vidid: vidforsee; vidsrc: /videos/V2ForseeCreekRunBaxter1525.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="38.86 -16.4 -138.03" rotation="0 0 0"></a-entity>
                <a-entity id="stand14" position="39.5 -18.6 -117.75" rotation="0 90 0" stand-display="billboardtext: AUDIO \n 14; platetext: Burning Div O: 10:19; audiosrc: /audio/Stand14.mp3"></a-entity>
                <a-entity id="progressionmap" gltf-model="#progmap" position="52.022 -18 -127.15" scale="6.9 6.9 6.9" rotation="0 0 0"></a-entity>
            </a-entity>
            <!-- Dozer Line -->
            <a-entity id="dozerlineassets">
                <a-entity id="quote6" position="37.285 -16 -114.95" add-quote="quotetext: 'It was good until it wasn't.'\n'Wind shift, wind shift, wind shift.  Everyone starts looking for spots, we're gonna get spots!'\n'We've got ember wash on the corner!'\n-Division O Holding Resources"></a-entity>
                <a-entity id="stand15" position="11.852 -20 -97.21" rotation="0 90 0" stand-display="billboardtext: AUDIO \n 15; platetext: It was good until it wasn't: 7:08; audiosrc: /audio/Stand15.mp3"></a-entity>
                <a-entity id="quote7" position="-14.9 -13 -89" add-quote="quotetext: 'We saw an engine captain chasing spots on the end of a lateral.  We tried to get his attention and he couldn't hear us.  We had to pull on the hose to get his attention and once we did, he beat us down the hill even after he fell.  I just remembered that's how Cory Iverson died and didn't want to let that happen again.'\n-CAL FIRE Engine Crewmember"></a-entity>
                <a-entity id="quote8" position="-36.35 -7.2 -88" add-quote="quotetext: 'Orange jumpsuits came out of the woods like ants.'\n-CAL FIRE Engine Captain"></a-entity>
                <a-entity id="stand16" position="-28 -12.6 -88" rotation="0 0 0" stand-display="billboardtext: AUDIO \n 16; platetext: Missing Firefighter 1: 2:29; audiosrc: /audio/Stand16.mp3"></a-entity>
                <a-entity id="quote9" position="-55.6 -3.7 -88.5" add-quote="quotetext: 'It was weird.  It felt like, 'Firefight, firefight, missing person...Firefight, firefight, missing person.''\n-CAL FIRE Captain"></a-entity>
                <a-entity id="quote10" position="-77.8 2.7 -80.4" add-quote="quotetext: 'The whole time I was just waiting for Charlie to pop out of the woods with his radio bumped off going, 'Woah!  That was crazy!''\n-Big Bear SUPT 1"></a-entity>
                <a-entity id="stand17" position="-107.8 8 -74.345" rotation="0 0 0" stand-display="billboardtext: AUDIO \n 17; platetext: Missing Firefighter 2: 8:43; audiosrc: /audio/Stand17.mp3"></a-entity>
                <a-entity id="quote11" position="-116.34 12.4 -76.3" add-quote="quotetext: 'It was bizarre to me that there was no standard way to convey an IWI for a missing firefighter' [In comparison to a structure fire Personnel Accountability Report (PAR) ]\n-MEDL(T), Structure Firefighter of 30+ years"></a-entity>
                <a-entity id="stand18" position="-128.5 16.68 -60.13" rotation="0 75 0" stand-display="billboardtext: AUDIO \n 18; platetext: Firefighter Found 1: 4:26; audiosrc: /audio/Stand18.mp3"></a-entity>
                <a-entity id="quote12" position="-132.2 20.75 -41.73" rotation="0 90 0" add-quote="quotetext: 'I don't smoke, but I needed a cigarette'\n-Big Bear, SUPT 1"></a-entity>
                <a-entity id="stand19" position="-99.75 14.6 -23.3" rotation="0 330 0" stand-display="billboardtext: AUDIO \n 19; platetext: Firefighter Found 2: 1:57; audiosrc: /audio/Stand19.mp3"></a-entity>
                <a-entity id="quote13" position="-87.9 19.9 -10.3" rotation="0 227 0" add-quote="quotetext: 'Charlie's emergency notification form said that he wanted [The President of the United States] to deliver the news.  Only Charlie...'\n-Mountain Top District Ranger"></a-entity>
                <a-entity id="vgates" vidloadcontrol="vidid: vidgatesofhell; vidsrc: /videos/V3GatesOfHell1923.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="36.87 -16.67 -105.9" rotation="0 180 0"></a-entity>
                <a-entity id="vegress" vidloadcontrol="vidid: videgress; vidsrc: /videos/V4EgressDownLineCalFire1931.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="-22.1 -11.8 -88.6" rotation="0 0 0"></a-entity>
                <a-entity id="vshortdrive" vidloadcontrol="vidid: vidshortdrive; vidsrc: /videos/V5ShortDrive2005.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="16.474 -15.12 -128.4" rotation="0 45 0"></a-entity>
                <a-entity id="vatgs" vidloadcontrol="vidid: vidnightatgs; vidsrc: /videos/V6NightATGS1.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="-92.43 6.04 -78.82" rotation="0 15 0"></a-entity>
                <a-entity id="vdrone1" vidloadcontrol="vidid: viddronecolor; vidsrc: /videos/V7Drone2317.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="-130.4 19.4 -57.4" rotation="0 67 0"></a-entity>
                <a-entity id="vdrone2" vidloadcontrol="vidid: viddronetherm; vidsrc: /videos/V8DroneWithThermal2327.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="-132 19.84 -53.89" rotation="0 67 0"></a-entity>
                <a-entity id="vlongdrive" vidloadcontrol="vidid: vidlongdrive; vidsrc: /videos/V9LongDrive2007.mp4; vwidth: 0.854; vheight: 0.48; vscale: 3" position="-113.3 16.5 -36.4" rotation="0 -45 0"></a-entity>
            </a-entity>
            <!-- Organizational Learning Room 4.85-->
            <a-entity id="learningroomassets">
                <a-entity id="theme1" position="-82 14.936 -4.73" rotation="0 225 0" stand-display="billboardtext: Organizational \n Learning \n 1; platetext:Theme 1: 3:08; audiosrc: /audio/ELDLRTheme1.mp3"></a-entity>
                <a-entity id="theme2" position="-68.675 12.26 -8.65" rotation="0 170 0" stand-display="billboardtext: Organizational \n Learning \n 2; platetext:Theme 2: 4:38; audiosrc: /audio/ELDLRTheme2.mp3"></a-entity>
                <a-entity id="theme3" position="-58.6 9.828 0.844" rotation="0 110 0" stand-display="billboardtext: Organizational \n Learning \n 3; platetext:Theme 3: 5:13 ; audiosrc: /audio/ELDLRTheme3.mp3"></a-entity>
                <a-entity id="theme4" position="-61.96 7.28 14.87" rotation="0 45 0" stand-display="billboardtext: Organizational \n Learning \n 4; platetext:Theme 4: 0:56; audiosrc: /audio/ELDLRTheme4.mp3"></a-entity>
                <a-entity id="theme5" position="-75.28 4.72 18.59" rotation="0 345 0" stand-display="billboardtext: Organizational \n Learning \n 5; platetext:Theme 5: 0:16; audiosrc: /audio/ELDLRTheme5.mp3"></a-entity>
                <a-entity id="theme6" position="-85.475 2.158 9.023" rotation="0 290 0" stand-display="billboardtext: Organizational \n Learning \n 6; platetext:Theme 6: 1:30; audiosrc: /audio/ELDLRTheme6.mp3"></a-entity>
                <a-entity id="fbmap" gltf-model="#fbmodel" position="-72.3 3.5 3.353" scale="0.75 0.75 0.75" rotation="0 90 0"></a-entity>
            </a-entity>
            <!-- Visitor Center -->
            <a-entity id="visitorcenterassets">
            </a-entity>
        </a-scene>
    </body>
</html>
